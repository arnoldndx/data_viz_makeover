---
title: "Data Viz Makeover 2"
description: |
  A critque and makeover of a Singapore trade data visualisation.
author:
  - name: Arnold Ng
    url: {}
date: 06-20-2021
output:
  distill::distill_article:
    self_contained: false
    toc: true
    toc_depth: 2
---

# 1. Critique of the visualisation

<center>

![Fig 1. Original data visualisation](original_viz.jpg)

</center>

## 1.1 Clarity

The intent of the visualisation is to describe some of Singapore's most important mechandise trade relationships. It shows which countries are net exporters to Singapore and which are net importers, and also informs the reader of the  

* **Color coding used for two dimensions - export vs import, and country/region.** This makes it confusing for the reader as there is too much color in the visualisation. In order to direct the readers attention appropriately, one visualisation detail (e.g. size, colour, axes) should be used for one data dimension only.

<center>

![Fig 2. Size does not scale linearly with total merchandise trade volume](clarity2.png)

</center>

* **The scaling of the bubble size is not based on area (see Fig 2 above).** Instead, it is the radius which is proportional to the total bilateral trade volume. This makes the size scale polynomially (i.e. the square of the total bilateral trade volume)instead of linearly which can give rise to misinterpretation as the reader usually assumes that the size will scale linearly.

* **The bubbles are opaque, obscuring the data points showing the export/import amounts of some countries.** This makes it difficult to see exactly how much Singapore imports/exports to these countries. The data labels only quote the total bilateral merchandise trade volume, from which the reader cannot derive the import/export figures.

* **The axes labels at clustered around the origin rather than centred on the axes.** This makes it difficult for the reader to tell at a glance which axis refers to exports and which to imports. The visualisation attempts to use colours to differentiate the axes, but it is not as effective as using title positioning.

<center>

![Fig 3. Annotation from original viz](clarity4.png)

</center>


* **The graphic does not help to convey to the reader the key message annotated in the blue box (see Fig 3 above).** The key message in the blue box discusses Singapore's overall balance of trade with the two largest economies in the world, Mainland China and the United States. It references trade data going back to 2006. However, the data in the visualisation only shows data for 2020.

* **The annotation does note use similar time scales in comparing the two countries.** It compares trade with China dating back to 2009, but for the United States it uses trade data going back to 2006.

* **The visualisation designates a top net exporter and top net importer but does not explain what this means to the reader.** It appears from inspection that this refers to the country with which Singapore has the highest and lowest balance of trade.

## 1.2 Aesthetics

Besides clarity the aesthetics of the visualisation could also be improved. Some observed weaknesses are:

* **Use of large labels within opaque boxes creates a very cluttered impression.**  There is too much going on on the visualisation, with many boxes and icons scattered across the visualisation with very little explanatory value. For example, the data labels would be better served being inside the respective circles rather than sticking out from the circles to keep the rest of the graph clean.

<center>

![Fig 4. Unnecessary icons](aes2.png)

</center>

* **Unnecessary use of large icons clutters visualisation with non-data ink. ** The icons (e.g. 'Imports'/'Exports' and 'Top Importer'/'Top Exporter') are unnecessary. For the 'Imports'/'Exports' axes labels, the text would have been sufficient.

* **There is too much colour in the visualisation.** Even the background is blue even though color coding is a key detail used to convey information in this visualisation. The clash of colours is very irritating to the reader as it takes attention away from the key points the visualisation is trying to make.

# 2. Proposed alternative visualisation

The proposed visualisation will address the issues raised above.

* **An interactive side-by-side comparison of trade data from selected years will help readers to compare change in trade data over time.** This will help users to draw conclusions on any change in the nature of our trade relationships (e.g. change from net exporter to net importer or vice versa) as well as the relative importance of our various trade relationships when compared with one another.

* **Color coding on the bubble chart will only be used for countries.** This will help to direct the users attention appropriately to changes in our relationships with various countries/regions relative to each other.

* **Axes are labeled in the middle of the axis for clarity.**

* **Total Bilateral Trade is plotted separately as a supplementary chart.** This will allow the reader to quickly see how our trade relationships are ranked year to year and identify trends (e.g. are some countries/regions becoming more/less important over time).

* **Balance of trade is plotted separately as a supplementary chart.** This does away with the need to identify 'Top net exporter' or 'Top net importer' with icons as the balance of trade plot will show the relative ranking of the various countries over time. We can also see trends in our trade relationships over time (E.g. some relationships evolving from net exporter to net importer and vice versa).

* **Reduce opacity of bubble fills so that all data points can be clearly visible.**

* **Link all charts so that when a country is selected, it will be highlighted across all charts for attention.** This will allow the reader to zoom into the relevant country and make comparisons.

* **Custom tooltips to highlight key information more clearly.**

<center>

![Sketch of proposed data visualisation](vissketch.png)

</center>

# 3. Step-by-step guide on preparing data visualisation in Tableau

## 3.1 Data preparation in Excel

As the dataset used is the same as Data Viz Makeover 1, we follow the same steps noted in [Data Viz Makeover 1](https://arnoldndx.netlify.app/posts/2021-05-22-my-1st-post/) to prepare the data.

## 3.2 Visualisation in Tableau

Once the data has been prepared, we now move to Tableau to execute the proposed visualisation.

Step | Actions Required | Screenshot
-----|------------------|-----------
1    | First, load the processed data into Tableau and join the _Import_ and _Export_ tables. We should use a **full outer join** as there will be cases where a country has registered exports but no registered imports for the given time period and vice versa. Any other form of join (e.g. left outer, right outer, inner) will result in loss of data. The data should be joined on _Country/Region_ and _Date_ | ![Step 1](step1.png)
2    | Next, create calculated fields to consolidate the data for _Country/Region_ and _Date_ as these fields will be nil for some rows if we only look at _Imports_ or _Exports_. We can do this using an _IFNULL_ statement. | ![Step 2](step2.png)
3    | Now create a calculated field for the total bilateral trade (i.e. exports + imports). We will be using this value to rank the countries/regions later. Be sure to use _IFNULL_ to convert nulls to zeroes as null + value will return a null. This will cause the later visualisation to be wrong as data will be missed.| ![Step 3](step3.png)
4    | Create the centrepiece of the data visualisation, the 'pyramid' bar chart. We do this by dragging _Imports_ and _Exports_ into the columns and setting the visualisation to bar. Change the color of the _Exports_ bars to differentiate them from the _Imports_ bars by selecting _Color_ on the _Marks_ tab and editing the color for the _Exports_ bar graph. Then we drag _Country/Region_ into the rows so that the data is split by country/region. To achieve row banding for better visualisation, right-click _Country/Region_ and select _Format_. Then select the _Shading_ tab (i.e. the third tab) and choose a colour for _Pane_ under _Row Banding_. Set the _Banding Size_ to the second notch. Finally, we use the filters to filter the data by date to 2019-2020 which is the time range specified in the original visualisation. | ![Step 4](step4.png)
5    | Right-click the horizontal axis of _Imports_, which should be on the left side of the graph and reverse the axis so that the origin starts from the right instead of the left. This will create the "pyramid" look | ![Step 5](step5.png)
6    | While on the edit axis menu, select _Tick Marks_ and set both major and minor tick marks to _None_. We don't want to clutter out visualisation with non-data ink! Repeat this with the _Export_ axis and then hide both axes by right-clicking and deselecting the _Show Header_ option. | ![Step 6](step6.png)
7    | Add data labels by dragging _Imports_ and _Exports_ to the respective _Marks_ tab. Format the number by clicking on the right side of the green pill bar and selecting _Format_. Then select _Pane_ and edit the number format in _Number_. We want to visualise the number in 'billions' to reduce the length of the numbers and reduce clutter in our visualisation. | ![Step 7](step7.png)
8    | Right-click the _Country/Region_ headers on the left and click _Format_. Then adjust the fonts and size in the _Header_ tab. | ![Step 8](step8.png)
9    | Now right-click the _Country/Region_ pill bar under _Rows_ and select _Sort_. We will now sort the data in the bar graphs by total bilateral trade volumes to identify our most important merchandise trade relationships. | ![Step 9](step9.png)
10   | Notice that interspersed among our biggest trade relationships are regions which are actually whole continents (e.g. Asia, America). These are aggregated data from the countries that belong in the respective continent or region (e.g. European Union). We will have to remove this data from the visualisation to avoid double counting. Drag the _Country/Region_ dimension into the _Filters_ tab and then right-click and _Edit Filter_. Uncheck the continents and regions. | ![Step 10](step10.PNG)
11   | Now we can see all out trading relationships between 2019-2020. We shall pick the top 20 relationships for the visualisation. Right-click the _Country/Region_ filter and select the _Top_ tab. Then select _By field_ and specify the top 20 in _Total Bilateral Trade_. You are now done with the centrepiece graph!| ![Step 11](step11.png)
12   | To create the bars showing the proportion of total trading volume contributed by the top 20 countries/regions, we will need to do so on a new worksheet. Create a new sheet by selecting the _New Worksheet_ button at the the bottom. | ![Step 12](step12.png)
13   | Drag _Imports_ to columns and select _Bar_ as the type of mark. Perform the necessary filtering as described in Steps 4 and 10. In order to reuse this for the _Exports_ chart, right-click the _Country/Regions_ filter and click _Create Set_. You can call this set "Less Regions Set" | ![Step 13](step13.png)
14   | Create a another set by right-clicking _Country/Region_ under the _Data_ tab on the left of the screen. Then select _Create_ and _Set_. In this set, select the top 20 countries as identified from the visualisation generated in Steps 1 to 11. | ![Step 14](step14.png)
15   | Now drag this new set into the _Marks_ tab and set it to color. Then click the _Color_ button on the _Marks_ tab and click _Edit Colors..._. Choose the colors for the _IN_ and _OUT_. This specifies the colors for data within the top 20 countries set and outside the top 20 countries set. We will make them blue and gray for maximum contrast as shade is already used to distinguish between exports and imports. | ![Step 15](step15.PNG)
16   | We will need the data labels to be informative as we want to reduce clutter and non-data ink. Therefore, we will need to create a calculated field that will label the top 20 countries data with "Top 20:" and not label anything on the data outside the set. | ![Step16](step16.PNG)
17   | Then use _Quick Table Calculation_ to create the _Percent of Total_ to add to the data label. | ![Step 17](step17.png)
18   | Put it all together by using the _Edit Label_ function in the _Marks_ tab as shown. | ![Step 18](step18.png)
19   | Repeat this for _Exports_.
20   | Finally, it is time to put everything together into our final visualisation. We will use a dashboard to do this, so create a dashboard by clicking the respective button at the bottom. | ![Step 20](step20.PNG)
21   | Drag the sheets onto the page and arrange them in a neat order. Use the _Blank_ objects for spacers as needed and the _Text_ objects to input text into your visualisations. | ![Step 21](step21.png)
22   | Use the _Layout_ tab to provide background color for your text objects as needed. | ![Step 22](step22.png)

And now you're done!

# 4. New Visualisation and Observations

Executing the visualisation described in Section 2, we produce the following graphic. The workbook can also be accessed on Tableau Public [here](https://public.tableau.com/app/profile/arnold.ng6549/viz/datavizmakeover2_16242002706520/Dashboard1).

```{r, echo=FALSE}
htmltools::includeHTML("embed.html")
```

From the visualisation, we can make the following observations:

* **It becomes immediately apparent that the original visualisation was incorrect in identifying Singapore's top 6 merchandise trade relationships.** It should be Indonesia and not Japan which is included in the top 6.

* **We have a diverse and global set of trading partners,** with four continents represented amongst our top 20 merchandise trading relationships.

* **Our top 5 trade relationships account for nearly half of our merchandise trade by volume, and our top 20 account for about 90% of our merchandise trade.** This shows that while we are fairly well diversified geographically speaking, Singapore is still quite dependent on a handful of major trading partners.

* **We are a net exporter.** We export about 10% more merchandise (by value) than we import, which indicates that we run a trade surplus with regards to merchandise. Some of our trade relationships feature a significant trade imbalance (e.g. trade with Hong kong runs a signficant surplus, while trade with Taiwan runs a significant deficit). This information, along with information types of merchandise exported, services trade data, etc. are important to inform our exchange rate policy, which has significant impacts on our trade.

